{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://js-service-calls/./src/render.js","webpack://js-service-calls/./src/services.js","webpack://js-service-calls/webpack/bootstrap","webpack://js-service-calls/webpack/runtime/define property getters","webpack://js-service-calls/webpack/runtime/hasOwnProperty shorthand","webpack://js-service-calls/webpack/runtime/make namespace object","webpack://js-service-calls/./src/site.js"],"sourcesContent":["\"use strict\";\r\n\r\nimport * as Service from './services.js'\r\n\r\nexport function render() {\r\n    const isLoggedIn = Service.makeGETFetchCall('/api/v1/session');\r\n    isLoggedIn\r\n    .then((res) => {\r\n        const uname = res.username;\r\n        const messages = res.messages;\r\n        const userList = res.userList;\r\n        renderLoggedIn(uname, messages, userList);\r\n    })\r\n    .catch((err) => {\r\n        renderLogin();\r\n    })\r\n}\r\n\r\nexport function renderLogin() {\r\n    const connectEl = document.querySelector('#page');\r\n    connectEl.innerHTML = `\r\n        <nav class=\"log-in-page\">\r\n            <h1>Catchat</h1>\t\r\n            <div class=\"forms\">\r\n                <nav class=\"log-in\">\r\n                        <div>Enter User Name<span>*</span></div>\t\t\t\t\t\t\r\n                        <input class=\"uname\" name=\"name\" type=\"text\">\t\t\t\t\t\r\n                </nav>\t\t\t\r\n                <button class=\"submitLogin\" type=\"submit\">Contine</button>\t\r\n            </div>\r\n        </nav>\r\n    `;\r\n}\r\n\r\nexport function renderLoggedIn(username, message, users) {\r\n    const listMessages = message && message.map((message) => {\r\n        for(let details in message){\r\n            const className = details == username ? \"own\" : \"sender\";\r\n            return `\r\n                <ul class=\"${className}\">\r\n                    <li>${details}</li>\r\n                    <p>${message[details]}</p>\r\n                </ul>\r\n            `;\r\n        }\r\n    }).join('');\r\n    const listUsers = users && users.map((user) => {\r\n        return `\r\n            <li>${user}</li>\r\n        `;\r\n    }).join('');\r\n    const connectEl = document.querySelector('#page');\r\n    connectEl.innerHTML = ` \r\n        <header>\t\t\r\n        <h1>CatChat</h1>\r\n        <nav class=\"profile\">\r\n            <img height=\"30px\" width=\"30px\" class=\"profile-logo\" src=\"images/profileLogo.png\" alt=\"image\">\t\r\n            <ul class=\"user-details\">\r\n                <li>Hello, ${username}</li>\t\r\n                <li>Status: Active</li>\r\n            </ul>\r\n        </nav>\r\n        <nav class=\"log-out\">\r\n            <button data-uname=\"${username}\" class=\"logout\" type=\"submit\" >Log Out</button>\r\n        </nav>\r\n    </header>\t\t\t\t\t\r\n    <div id=\"app\">\r\n        <div id=\"usersList\">\r\n            <nav class=\"group\">\r\n                <a class=\"active-members\">Active members</a>\r\n                <ul class=\"members\">\r\n                    ${listUsers}\r\n                </ul>\r\n            </nav>  \r\n        </div>\r\n        <nav class=\"chat-box\">\r\n            <div id=\"messagesList\">\r\n                <nav class=\"messeges\">\r\n                    ${listMessages}\r\n                </nav>\r\n            </div>\r\n            <nav class=\"type-msg\">\r\n                <div class=\"showLoading\">\r\n                </div>\r\n                <textarea class=\"messege\" name=\"message\" placeholder=\"Write something...\" ></textarea><br>\r\n                <input class=\"submitMessage\" type=\"submit\" value=\"Send\">\r\n            </nav>\r\n        </nav>  \r\n    </div>\r\n    `;\r\n    let objDiv = document.querySelector('.messeges');\r\n    objDiv.scrollTop = objDiv.scrollHeight;\r\n}\r\n\r\nexport function renderError() {\r\n    const connectEl = document.querySelector('#page');\r\n    connectEl.innerHTML = `\r\n        <nav class=\"log-in-page\">\r\n            <nav class=\"error-message\">\r\n                <li>Incorrect log in user name</li>\r\n                <li><a href=\"/\">Go back to LogIn page</a></li>\r\n            </nav>\r\n        </nav>\r\n    `;\r\n}\r\n\r\nexport function updateUsersList(users) {\r\n    const userList = document.querySelector('#usersList');\r\n    const listUsers = users && users.map((user) => {\r\n        return `\r\n            <li>${user}</li>\r\n        `;\r\n    }).join('');\r\n    userList.innerHTML = `\r\n    <nav class=\"group\">\r\n        <a class=\"active-members\">Active members</a>\r\n        <ul class=\"members\">\r\n            <li>${listUsers}</li>\r\n        </ul>\r\n    </nav>  \r\n    `;\r\n}\r\n\r\nexport function showLoading() {\r\n    const userList = document.querySelector('#usersList');\r\n    userList.innerHTML = `\r\n        <nav class=\"group\">\r\n            <a class=\"active-members\">Active members</a>\r\n            <ul class=\"members\">\r\n                <div class=\"loader\"></div>\r\n            </ul>\r\n        </nav>  \r\n    `;\r\n    const messageLoading = document.querySelector('.showLoading');\r\n    messageLoading.innerHTML = `\r\n        <div class=\"loader\"></div>\r\n    `;\r\n}\r\n\r\nexport function removeLoading() {\r\n    const messageLoading = document.querySelector('.showLoading');\r\n    messageLoading.innerHTML = ``;\r\n}\r\n\r\nexport function updateMessagesList(username, message) {\r\n    const messageList = document.querySelector('#messagesList');\r\n    const listMessages = message && message.map((message) => {\r\n        for(let details in message){\r\n            const className = details == username ? \"own\" : \"sender\";\r\n            return `\r\n                <ul class=\"${className}\">\r\n                    <li>${details}</li>\r\n                    <p>${message[details]}</p>\r\n                </ul>\r\n            `;\r\n        }\r\n    }).join('');\r\n    messageList.innerHTML = `\r\n        <nav class=\"messeges\">\r\n            ${listMessages}\r\n        </nav>\r\n    `;\r\n    let objDiv = document.querySelector('.messeges');\r\n    objDiv.scrollTop = objDiv.scrollHeight;\r\n}","export function fetchLogin(username) {\r\n  return fetch('/api/session/', {\r\n    method: 'POST',\r\n    headers: {\r\n      'content-type': 'application/json',\r\n    },\r\n    body: JSON.stringify( { username } ),\r\n  })\r\n  .catch( err => Promise.reject({ error: 'network-error' }) )\r\n  .then( response => {\r\n    if(!response.ok) { \r\n      return response.json().then( err => Promise.reject(err) );\r\n    }\r\n    return response.json(); \r\n  });\r\n}\r\n\r\nexport function makeGETFetchCall(api) {\r\n  return fetch(api)\r\n    .catch( () => Promise.reject({ error: 'network' }) )\r\n    .then( response => {\r\n        if(response.ok) { return response.json(); }\r\n        return response.json().then(err => Promise.reject(err) );\r\n    })\r\n    .catch( err => {\r\n        return Promise.reject({ error: err });\r\n    });        \r\n}\r\n\r\nexport function makeDELETEFetchCall(api) {\r\n  return fetch(api, {\r\n        method: 'DELETE'\r\n    })\r\n    .catch( () => Promise.reject({ error: 'network' }) )\r\n    .then( response => {\r\n        if(response.ok) { return response.json(); }\r\n        return response.json().then(err => Promise.reject(err) );\r\n    })\r\n    .catch( err => {\r\n        return Promise.reject({ error: err });\r\n    });        \r\n}\r\n\r\nexport function makeFetchCallWithBody(api, body, type) {\r\n  return fetch(api, {\r\n        method: type,\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: body,\r\n    })\r\n    .catch( () => Promise.reject({ error: 'network' }) )\r\n    .then( response => {\r\n        if(response.ok) { return response.json(); }\r\n        return response.json().then(err => Promise.reject(err) );\r\n    })\r\n    .catch( err => {\r\n        return Promise.reject({ error: err });\r\n    });        \r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\"use strict\";\r\n\r\nimport * as Service from './services.js'\r\nimport {render, renderLoggedIn, renderError, renderLogin, showLoading, updateMessagesList, updateUsersList, removeLoading} from './render';\r\n\r\n(function() {\r\n    const connectEl = document.querySelector('#page');\r\n    const userMessages = {};\r\n    connectEl.addEventListener('click', (event) => {\r\n        if (event.target.classList.contains('submitLogin')) {\r\n            const uname = document.getElementsByClassName(\"uname\")[0].value;\r\n            const submitLogin = Service.makeFetchCallWithBody('/api/v1/session', JSON.stringify({username : uname}), 'POST');\r\n            submitLogin\r\n            .then((res) => {\r\n                const uname = res.username;\r\n                const messages = res.messages;\r\n                const userList = res.userList;\r\n                renderLoggedIn(uname, messages, userList);\r\n            })\r\n            .catch((err) => { \r\n                renderError();\r\n            })\r\n            return;\r\n        } \r\n\r\n        if (event.target.classList.contains('submitMessage')) {\r\n            const messege = document.getElementsByClassName(\"messege\")[0].value;\r\n            if (!messege) return;\r\n            const submitMessage = Service.makeFetchCallWithBody('/api/v1/submitMessage', JSON.stringify({message : messege}), 'POST');\r\n            submitMessage\r\n            .then((res) => {\r\n                const uname = res.username;\r\n                const messages = res.messages;\r\n                const usersList = res.userList;\r\n                renderLoggedIn(uname, messages, usersList);\r\n            })\r\n            .catch((err) => { \r\n                renderLogin();\r\n            })\r\n            return;\r\n        }\r\n        \r\n        if (event.target.classList.contains('logout')) {\r\n            Service.makeDELETEFetchCall('/api/v1/session');\r\n            renderLogin();\r\n        } \r\n    });\r\n\r\n    let messageListDiv = document.getElementById(\"messagesList\");\r\n    messageListDiv && (messageListDiv.scrollTop = objDiv.scrollHeight);\r\n\r\n    // Check for new users or messages every 5seconds.\r\n    const interval = setInterval(function() { \r\n        showLoading(); // Showing loading spinner for 0.5 seconds achieved by using setTimeout in line 62.\r\n        const isLoggedIn = Service.makeGETFetchCall('/api/v1/session');\r\n        isLoggedIn\r\n        .then((res) => {      \r\n            const userList = res.userList; \r\n            const messages = res.messages;\r\n            const uname = res.username;\r\n            setTimeout(() => {\r\n                removeLoading();\r\n                updateUsersList(userList);\r\n                updateMessagesList(uname, messages);\r\n              }, \"500\")\r\n        })\r\n        .catch((err) => {\r\n            renderLogin();\r\n        })\r\n    }, 5000);\r\n    render();\r\n})();"],"names":["Service","render","isLoggedIn","makeGETFetchCall","then","res","uname","username","messages","userList","renderLoggedIn","err","renderLogin","connectEl","document","querySelector","innerHTML","message","users","listMessages","map","details","className","join","listUsers","user","objDiv","scrollTop","scrollHeight","renderError","updateUsersList","showLoading","messageLoading","removeLoading","updateMessagesList","messageList","fetchLogin","fetch","method","headers","body","JSON","stringify","Promise","reject","error","response","ok","json","api","makeDELETEFetchCall","makeFetchCallWithBody","type","userMessages","addEventListener","event","target","classList","contains","getElementsByClassName","value","submitLogin","messege","submitMessage","usersList","messageListDiv","getElementById","interval","setInterval","setTimeout"],"sourceRoot":""}